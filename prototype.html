<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard — Threefold Credit Union</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap');

        :root {
            --surface-primary: #16423C;
            --surface-primary-hover: #1a4e47;
            --surface-secondary: #6A9C89;
            --surface-accent: #C4DAD2;
            --surface-elevated: #ffffff;
            --surface-base: #fafaf9;
            --surface-subtle: #f5f5f4;

            --text-default: #0a0a0a;
            --text-secondary: #525252;
            --text-tertiary: #737373;
            --text-inverse: #ffffff;

            --border-default: #e5e5e5;
            --border-subtle: #f5f5f4;
            --border-strong: #d4d4d4;

            --accent-purple: #8B5CF6;
            --accent-amber: #F59E0B;
            --accent-green: #10B981;
            --accent-blue: #3B82F6;

            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --space-3xl: 4rem;

            --font-display: 'Space Grotesk', system-ui, -apple-system, sans-serif;
            --font-body: 'Inter', system-ui, -apple-system, sans-serif;

            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;

            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            --radius-full: 9999px;

            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            font-size: var(--text-base);
            line-height: 1.6;
            color: var(--text-default);
            background: var(--surface-base);
            -webkit-font-smoothing: antialiased;
        }

        /* Icon styles */
        .icon {
            width: 24px;
            height: 24px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .icon-sm {
            width: 20px;
            height: 20px;
        }

        .icon-lg {
            width: 28px;
            height: 28px;
        }

        /* Header */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(250, 250, 249, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-subtle);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-lg) var(--space-xl);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: var(--font-display);
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--surface-primary);
            letter-spacing: -0.02em;
            text-decoration: none;
        }

        .header-actions {
            display: flex;
            gap: var(--space-md);
            align-items: center;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: var(--surface-primary);
            color: var(--text-inverse);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: var(--text-sm);
        }

        /* Dashboard Layout */
        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-2xl) var(--space-xl);
        }

        .dashboard-header {
            margin-bottom: var(--space-2xl);
        }

        .dashboard-title {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            font-weight: 600;
            color: var(--text-default);
            margin-bottom: var(--space-sm);
            letter-spacing: -0.02em;
        }

        .dashboard-subtitle {
            color: var(--text-secondary);
            font-size: var(--text-base);
        }

        /* Account Cards */
        .accounts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .account-card {
            background: var(--surface-elevated);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            transition: all 0.2s ease;
        }

        .account-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .account-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-lg);
        }

        .account-type {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .account-icon {
            width: 40px;
            height: 40px;
            background: var(--surface-accent);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--surface-primary);
        }

        .account-balance {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 600;
            color: var(--text-default);
            margin-bottom: var(--space-md);
            letter-spacing: -0.02em;
        }

        .account-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: var(--space-md);
            border-top: 1px solid var(--border-subtle);
        }

        .account-number {
            font-size: var(--text-sm);
            color: var(--text-tertiary);
        }

        .account-status {
            font-size: var(--text-xs);
            padding: var(--space-xs) var(--space-sm);
            background: var(--surface-subtle);
            border-radius: var(--radius-sm);
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* Anthrobucks Card */
        .anthrobucks-card {
            background: linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%);
            color: var(--text-inverse);
            border: none;
        }

        .anthrobucks-card .account-type,
        .anthrobucks-card .account-balance,
        .anthrobucks-card .account-number,
        .anthrobucks-card .account-status {
            color: var(--text-inverse);
        }

        .anthrobucks-card .account-icon {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-inverse);
        }

        .anthrobucks-card .account-status {
            background: rgba(255, 255, 255, 0.2);
        }

        .anthrobucks-card .account-info {
            border-top-color: rgba(255, 255, 255, 0.2);
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-2xl);
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            min-width: 180px;
            padding: var(--space-lg);
            background: var(--surface-elevated);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--text-default);
        }

        .action-btn:hover {
            border-color: var(--surface-secondary);
            box-shadow: var(--shadow-md);
        }

        .action-icon {
            width: 40px;
            height: 40px;
            background: var(--surface-accent);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--surface-primary);
            flex-shrink: 0;
        }

        .action-content h3 {
            font-family: var(--font-display);
            font-size: var(--text-base);
            font-weight: 600;
            margin-bottom: var(--space-xs);
        }

        .action-content p {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        /* Transactions */
        .transactions-section {
            background: var(--surface-elevated);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .section-title {
            font-family: var(--font-display);
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-default);
        }

        .view-all {
            font-size: var(--text-sm);
            color: var(--surface-secondary);
            text-decoration: none;
            font-weight: 600;
        }

        .transaction-list {
            list-style: none;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-lg) 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-left {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            flex: 1;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            background: var(--surface-subtle);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }

        .transaction-info h4 {
            font-size: var(--text-base);
            font-weight: 600;
            color: var(--text-default);
            margin-bottom: var(--space-xs);
        }

        .transaction-info p {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .transaction-amount {
            font-family: var(--font-display);
            font-size: var(--text-lg);
            font-weight: 600;
        }

        .transaction-amount.positive {
            color: var(--accent-green);
        }

        /* Back Button */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-lg);
            background: var(--surface-elevated);
            color: var(--text-default);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            text-decoration: none;
            font-size: var(--text-sm);
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .back-btn:hover {
            border-color: var(--surface-secondary);
            box-shadow: var(--shadow-sm);
        }

        /* AI Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            z-index: 1000;
        }

        .chat-button {
            width: 60px;
            height: 60px;
            background: var(--surface-primary);
            color: var(--text-inverse);
            border: none;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-xl);
            transition: all 0.2s ease;
        }

        .chat-button:hover {
            background: var(--surface-primary-hover);
            transform: scale(1.05);
        }

        .chat-container {
            display: none;
            position: fixed;
            bottom: calc(var(--space-xl) + 70px);
            right: var(--space-xl);
            width: 400px;
            height: 600px;
            background: var(--surface-elevated);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            flex-direction: column;
            overflow: hidden;
        }

        .chat-container.active {
            display: flex;
        }

        .chat-header {
            padding: var(--space-lg);
            background: var(--surface-primary);
            color: var(--text-inverse);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            font-family: var(--font-display);
            font-size: var(--text-lg);
            font-weight: 600;
        }

        .chat-close {
            background: none;
            border: none;
            color: var(--text-inverse);
            cursor: pointer;
            padding: var(--space-xs);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-lg);
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .chat-message {
            max-width: 80%;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-lg);
            font-size: var(--text-sm);
            line-height: 1.5;
        }

        .chat-message.assistant {
            background: var(--surface-subtle);
            color: var(--text-default);
            align-self: flex-start;
        }

        .chat-message.user {
            background: var(--surface-primary);
            color: var(--text-inverse);
            align-self: flex-end;
        }

        .chat-suggestions {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            padding: 0 var(--space-lg) var(--space-lg);
        }

        .suggestion-btn {
            padding: var(--space-md);
            background: var(--surface-subtle);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            color: var(--text-default);
            cursor: pointer;
            text-align: left;
            transition: all 0.2s ease;
        }

        .suggestion-btn:hover {
            background: var(--surface-accent);
            border-color: var(--surface-secondary);
        }

        .chat-input-container {
            padding: var(--space-lg);
            border-top: 1px solid var(--border-default);
            background: var(--surface-elevated);
        }

        .chat-input {
            width: 100%;
            padding: var(--space-md);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: var(--text-sm);
            resize: none;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--surface-secondary);
        }

        /* Info Banner */
        .info-banner {
            background: linear-gradient(135deg, var(--surface-primary) 0%, var(--surface-secondary) 100%);
            color: var(--text-inverse);
            padding: var(--space-xl);
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-2xl);
        }

        .info-banner h3 {
            font-family: var(--font-display);
            font-size: var(--text-xl);
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }

        .info-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-xl);
            margin-top: var(--space-lg);
        }

        .info-stat h4 {
            font-family: var(--font-display);
            font-size: var(--text-2xl);
            font-weight: 600;
            margin-bottom: var(--space-xs);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                padding: var(--space-lg);
            }

            .accounts-grid {
                grid-template-columns: 1fr;
            }

            .quick-actions {
                flex-direction: column;
            }

            .chat-container {
                width: calc(100vw - 2 * var(--space-xl));
                height: calc(100vh - 150px);
            }

            .info-stats {
                grid-template-columns: 1fr;
                gap: var(--space-md);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="index.html" class="logo">Threefold Credit Union</a>
            <div class="header-actions">
                <a href="index.html" class="back-btn">
                    <svg class="icon icon-sm" viewBox="0 0 24 24">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back to Home
                </a>
                <div class="user-avatar">DS</div>
            </div>
        </div>
    </header>

    <main class="dashboard">
        <div class="dashboard-header">
            <h1 class="dashboard-title">Welcome back, Dr. Smith</h1>
            <p class="dashboard-subtitle">Here's your financial overview</p>
        </div>

        <!-- Account Cards -->
        <div class="accounts-grid">
            <div class="account-card">
                <div class="account-header">
                    <div>
                        <div class="account-type">Checking</div>
                    </div>
                    <div class="account-icon">
                        <svg class="icon" viewBox="0 0 24 24">
                            <rect x="2" y="5" width="20" height="14" rx="2"/>
                            <path d="M2 10h20"/>
                        </svg>
                    </div>
                </div>
                <div class="account-balance">$24,538.00</div>
                <div class="account-info">
                    <span class="account-number">•••• 4829</span>
                    <span class="account-status">ACTIVE</span>
                </div>
            </div>

            <div class="account-card">
                <div class="account-header">
                    <div>
                        <div class="account-type">Savings</div>
                    </div>
                    <div class="account-icon">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
                        </svg>
                    </div>
                </div>
                <div class="account-balance">$12,450.00</div>
                <div class="account-info">
                    <span class="account-number">•••• 5023</span>
                    <span class="account-status">ACTIVE</span>
                </div>
            </div>

            <div class="account-card anthrobucks-card">
                <div class="account-header">
                    <div>
                        <div class="account-type">Anthrobucks Wallet</div>
                    </div>
                    <div class="account-icon">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                    </div>
                </div>
                <div class="account-balance">AB 1,250</div>
                <div class="account-info">
                    <span class="account-number">Community Currency</span>
                    <span class="account-status">CIRCULATING</span>
                </div>
            </div>
        </div>

        <!-- Info Banner -->
        <div class="info-banner">
            <h3>Your Anthrobucks Impact</h3>
            <p>Your AB have circulated through the community, supporting practitioners and social initiatives.</p>
            <div class="info-stats">
                <div class="info-stat">
                    <h4>AB 420</h4>
                    <p>Transformed to Leaven</p>
                </div>
                <div class="info-stat">
                    <h4>12</h4>
                    <p>Network transactions</p>
                </div>
                <div class="info-stat">
                    <h4>5</h4>
                    <p>Community connections</p>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <a href="#" class="action-btn">
                <div class="action-icon">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                    </svg>
                </div>
                <div class="action-content">
                    <h3>Send Money</h3>
                    <p>Transfer USD or AB</p>
                </div>
            </a>

            <a href="#" class="action-btn">
                <div class="action-icon">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 12a9 9 0 1 1-9-9M12 3v9l4 4"/>
                    </svg>
                </div>
                <div class="action-content">
                    <h3>Buy Anthrobucks</h3>
                    <p>Convert USD to AB</p>
                </div>
            </a>

            <a href="#" class="action-btn">
                <div class="action-icon">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M20 12v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M21 3l-9 9M21 3v7M21 3h-7"/>
                    </svg>
                </div>
                <div class="action-content">
                    <h3>Donate Leaven</h3>
                    <p>Support social initiatives</p>
                </div>
            </a>

            <a href="#" class="action-btn">
                <div class="action-icon">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                </div>
                <div class="action-content">
                    <h3>Find Practitioners</h3>
                    <p>Discover AB network</p>
                </div>
            </a>
        </div>

        <!-- Recent Transactions -->
        <div class="transactions-section">
            <div class="section-header">
                <h2 class="section-title">Recent Activity</h2>
                <a href="#" class="view-all">View All →</a>
            </div>

            <ul class="transaction-list">
                <li class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon">
                            <svg class="icon icon-sm" viewBox="0 0 24 24">
                                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                            </svg>
                        </div>
                        <div class="transaction-info">
                            <h4>Green Valley Biodynamic Farm</h4>
                            <p>AB payment • Today at 2:45 PM</p>
                        </div>
                    </div>
                    <div class="transaction-amount">- AB 45</div>
                </li>

                <li class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon">
                            <svg class="icon icon-sm" viewBox="0 0 24 24">
                                <path d="M9 18V5l12-2v13M6 14v8M6 14a3 3 0 1 1 0-6M6 22a3 3 0 1 0 0-6"/>
                            </svg>
                        </div>
                        <div class="transaction-info">
                            <h4>Waldorf School Music Program</h4>
                            <p>AB payment • Yesterday</p>
                        </div>
                    </div>
                    <div class="transaction-amount">- AB 120</div>
                </li>

                <li class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon">
                            <svg class="icon icon-sm" viewBox="0 0 24 24">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/>
                            </svg>
                        </div>
                        <div class="transaction-info">
                            <h4>Patient Co-pay - Sarah M.</h4>
                            <p>AB received • 3 days ago</p>
                        </div>
                    </div>
                    <div class="transaction-amount positive">+ AB 85</div>
                </li>

                <li class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon">
                            <svg class="icon icon-sm" viewBox="0 0 24 24">
                                <path d="M21 12a9 9 0 1 1-9-9M12 3v9l4 4"/>
                            </svg>
                        </div>
                        <div class="transaction-info">
                            <h4>Anthrobucks Purchase</h4>
                            <p>USD to AB • 5 days ago</p>
                        </div>
                    </div>
                    <div class="transaction-amount positive">+ AB 500</div>
                </li>

                <li class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon">
                            <svg class="icon icon-sm" viewBox="0 0 24 24">
                                <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                            </svg>
                        </div>
                        <div class="transaction-info">
                            <h4>Eurythmy Therapist - Lisa K.</h4>
                            <p>AB payment • 1 week ago</p>
                        </div>
                    </div>
                    <div class="transaction-amount">- AB 95</div>
                </li>
            </ul>
        </div>
    </main>

    <!-- AI Chat Widget -->
    <div class="chat-widget">
        <button class="chat-button" onclick="toggleChat()">
            <svg class="icon icon-lg" viewBox="0 0 24 24">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
        </button>

        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <h3>Business Intelligence</h3>
                <button class="chat-close" onclick="toggleChat()">
                    <svg class="icon icon-sm" viewBox="0 0 24 24">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="chat-message assistant">
                    Hi Dr. Smith! I'm your AI assistant. I can help you understand your business finances, staff payroll, Anthrobucks activity, and more. What would you like to know?
                </div>
            </div>

            <div class="chat-suggestions">
                <button class="suggestion-btn" onclick="askQuestion('What was my total payroll last month?')">
                    What was my total payroll last month?
                </button>
                <button class="suggestion-btn" onclick="askQuestion('Show me my Anthrobucks circulation trends')">
                    Show me my Anthrobucks circulation trends
                </button>
                <button class="suggestion-btn" onclick="askQuestion('How much have I earned from patient AB payments?')">
                    How much have I earned from patient AB payments?
                </button>
            </div>

            <div class="chat-input-container">
                <textarea
                    class="chat-input"
                    id="chatInput"
                    placeholder="Ask about your finances, payroll, or AB activity..."
                    rows="3"
                    onkeydown="handleKeyPress(event)"
                ></textarea>
            </div>
        </div>
    </div>

    <script>
        function toggleChat() {
            const container = document.getElementById('chatContainer');
            container.classList.toggle('active');
        }

        function addMessage(text, type) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${type}`;
            messageDiv.textContent = text;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function askQuestion(question) {
            addMessage(question, 'user');

            // Simulate AI response
            setTimeout(() => {
                let response = '';

                if (question.includes('payroll')) {
                    response = 'Your total payroll last month was $18,450. This included 3 full-time staff members and 2 part-time assistants. Payroll costs are up 8% from the previous month due to the new hire in your front office.';
                } else if (question.includes('circulation') || question.includes('trends')) {
                    response = 'Your Anthrobucks circulation is healthy! In the past 30 days, you\'ve received AB 680 from patients and spent AB 540 with local practitioners and farms. Your AB velocity (how quickly they circulate) is 2.3x the network average, meaning they\'re actively supporting the community.';
                } else if (question.includes('earned') || question.includes('patient')) {
                    response = 'You\'ve earned AB 680 from patient payments this month. That\'s approximately $650 in equivalent value. Your top AB-paying patients are Sarah M. (AB 85), John D. (AB 120), and the Miller family (AB 95). About 15% of your patient payments are now in Anthrobucks!';
                } else if (question.includes('staff') || question.includes('employee')) {
                    response = 'You have 5 staff members: 3 full-time (Sarah - Office Manager at $4,200/mo, Tom - Nurse at $5,800/mo, Lisa - Therapist at $5,200/mo) and 2 part-time assistants (combined $3,250/mo). Total monthly payroll: $18,450.';
                } else if (question.includes('expense') || question.includes('spending')) {
                    response = 'Your top expenses this month: Payroll ($18,450), Rent & Utilities ($3,200), Medical Supplies ($2,100), Insurance ($1,800), and Biodynamic Farm purchases in AB ($450). Total: $26,000. You\'re tracking 5% under budget.';
                } else if (question.includes('leaven') || question.includes('donated')) {
                    response = 'You\'ve contributed AB 420 to the Leaven cycle this month. These transformed Anthrobucks are supporting the Waldorf School scholarship fund and the Community Garden initiative. Your Leaven contributions have helped 3 social good organizations this quarter.';
                } else {
                    response = 'I can help you with questions about payroll, expenses, Anthrobucks activity, staff information, and financial trends. Try asking about your payroll costs, AB circulation, or recent expenses!';
                }

                addMessage(response, 'assistant');
            }, 1000);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                const input = document.getElementById('chatInput');
                const question = input.value.trim();

                if (question) {
                    askQuestion(question);
                    input.value = '';
                }
            }
        }
    </script>
</body>
</html>
